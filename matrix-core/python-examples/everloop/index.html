<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Everloop MATRIX</title>
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css">
  <link rel="stylesheet" href="../../../css/theme.css">
  <link rel="stylesheet" href="../../../css/codehilite.css">
  <link rel="stylesheet" href="../../../css/superFences.css">
  <link rel="stylesheet" href="../../../css/clipboard.css">
  <link rel="stylesheet" href="../../../css/details.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
</head>

<body data-spy="scroll">
  <nav class="navbar navbar-expand-lg navbar-light container">
  <a class="navbar-brand" href="../../..">
    <img src="../../../img/everloop.png" width="38" height="38" class="d-inline-block align-top" alt="">
    <span>MATRIX</span>
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
  	<span class="navbar-toggler-icon"></span>
  </button>
</nav>

  <div class="header">
    <div class="container">
      <div class="jumbotron">
        <div class="row">
          <div class="col-sm-8">
            
            <h1>Everloop</h1>
            
          </div>
          <div class="col-sm-4">
            <form action="../../../search.html" method="get">
              <input class="form-control" type="search" name="q" placeholder="Search" />
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="content">
    <div class="container">
      <div class="row">
        <div class="sidebar col-lg-2">
          <div class="collapse navbar-collapse" id="navbar-menu">
            <h3>Documentation</h3>
            <ul>
                

<!-- link to depth-first url found  -->
  

<!-- If there are no children, use the url (simple)  -->
<li>
  <a href="../../.." class="">
    Overview
  </a>
</li>


  

<!-- link to depth-first url found  -->
  

<!-- If there are no children, use the url (simple)  -->
<li>
  <a href="../../../help/" class="">
    Support
  </a>
</li>


  


<!-- Children complicate things  -->

<!-- link to depth-first url found  -->
  

<!-- print root node  -->
<li class="">
  <a href="../../../matrix-creator/overview/" class="">
    MATRIX Creator
  </a>
</li>

<ul class="subnav">
   
  <!-- only 1 deep, print menu items  -->
   
  <li><a href="../../../matrix-creator/overview/" class="">Overview</a></li>
     
  <!-- only 1 deep, print menu items  -->
   
  <li><a href="../../../matrix-creator/device-setup/" class="">Device Setup</a></li>
     
  <!-- 2 deep  -->
  <!-- print subroot  -->
  <li>
    <a href="../../../matrix-creator/resources/overview/" class="">
      Resources
    </a>
  </li>

  <ul class="subnav">
        
        
        
        
        
        
        
        
      
  </ul>

    
  <!-- only 1 deep, print menu items  -->
   
  <li><a href="../../../matrix-creator/troubleshooting/" class="">Troubleshooting</a></li>
    
</ul>

  


<!-- Children complicate things  -->

<!-- link to depth-first url found  -->
  

<!-- print root node  -->
<li class="">
  <a href="../../../matrix-voice/overview/" class="">
    MATRIX Voice
  </a>
</li>

<ul class="subnav">
   
  <!-- only 1 deep, print menu items  -->
   
  <li><a href="../../../matrix-voice/overview/" class="">Overview</a></li>
     
  <!-- only 1 deep, print menu items  -->
   
  <li><a href="../../../matrix-voice/device-setup/" class="">Device Setup</a></li>
     
  <!-- only 1 deep, print menu items  -->
   
  <li><a href="../../../matrix-voice/esp32/" class="">ESP32</a></li>
     
  <!-- 2 deep  -->
  <!-- print subroot  -->
  <li>
    <a href="../../../matrix-voice/resources/overview/" class="">
      Resources
    </a>
  </li>

  <ul class="subnav">
        
        
        
        
        
        
      
  </ul>

    
  <!-- only 1 deep, print menu items  -->
   
  <li><a href="../../../matrix-voice/troubleshooting/" class="">Troubleshooting</a></li>
    
</ul>

  


<!-- Children complicate things  -->

<!-- link to depth-first url found  -->
  

<!-- print root node  -->
<li class="">
  <a href="../../../matrix-lite/overview/" class="">
    MATRIX Lite
  </a>
</li>

<ul class="subnav">
   
  <!-- only 1 deep, print menu items  -->
   
  <li><a href="../../../matrix-lite/overview/" class="">Overview</a></li>
     
  <!-- 2 deep  -->
  <!-- print subroot  -->
  <li>
    <a href="../../../matrix-lite/getting-started/" class="">
      Getting Started
    </a>
  </li>

  <ul class="subnav">
        
        
        
      
  </ul>

    
  <!-- 2 deep  -->
  <!-- print subroot  -->
  <li>
    <a href="../../../matrix-lite/js-reference/" class="">
      JavaScript Reference
    </a>
  </li>

  <ul class="subnav">
        
        
        
        
        
      
  </ul>

    
  <!-- 2 deep  -->
  <!-- print subroot  -->
  <li>
    <a href="../../../matrix-lite/py-reference/" class="">
      Python Reference
    </a>
  </li>

  <ul class="subnav">
        
        
        
        
      
  </ul>

    
  <!-- 2 deep  -->
  <!-- print subroot  -->
  <li>
    <a href="../../../matrix-lite/go-reference/" class="">
      Go Reference
    </a>
  </li>

  <ul class="subnav">
        
        
        
      
  </ul>

   
</ul>

  


<!-- Children complicate things  -->

<!-- link to depth-first url found  -->
  

<!-- print root node  -->
<li class="">
  <a href="../../../matrix-hal/overview/" class="">
    MATRIX HAL
  </a>
</li>

<ul class="subnav">
   
  <!-- only 1 deep, print menu items  -->
   
  <li><a href="../../../matrix-hal/overview/" class="">Overview</a></li>
     
  <!-- 2 deep  -->
  <!-- print subroot  -->
  <li>
    <a href="../../../matrix-hal/getting-started/" class="">
      Getting Started
    </a>
  </li>

  <ul class="subnav">
        
        
        
        
      
  </ul>

    
  <!-- 2 deep  -->
  <!-- print subroot  -->
  <li>
    <a href="../../../matrix-hal/reference/" class="">
      References
    </a>
  </li>

  <ul class="subnav">
        
        
        
        
        
        
        
        
      
  </ul>

    
  <!-- 2 deep  -->
  <!-- print subroot  -->
  <li>
    <a href="../../../matrix-hal/examples/" class="">
      Examples
    </a>
  </li>

  <ul class="subnav">
        
        
        
        
        
        
        
        
      
  </ul>

    
  <!-- only 1 deep, print menu items  -->
   
  <li><a href="../../../matrix-hal/troubleshooting/" class="">Troubleshooting</a></li>
    
</ul>

  


<!-- Children complicate things  -->

<!-- link to depth-first url found  -->
  

<!-- print root node  -->
<li class="">
  <a href="../../overview/" class="active">
    MATRIX Core
  </a>
</li>

<ul class="subnav">
   
  <!-- only 1 deep, print menu items  -->
   
  <li><a href="../../overview/" class="">Overview</a></li>
     
  <!-- 2 deep  -->
  <!-- print subroot  -->
  <li>
    <a href="../../getting-started/" class="">
      Getting Started
    </a>
  </li>

  <ul class="subnav">
        
        
        
        
        
      
  </ul>

    
  <!-- 2 deep  -->
  <!-- print subroot  -->
  <li>
    <a href="../../protocols/" class="">
      Driver Protocols
    </a>
  </li>

  <ul class="subnav">
        
        
        
        
        
        
        
      
  </ul>

    
  <!-- 2 deep  -->
  <!-- print subroot  -->
  <li>
    <a href="../../javascript-examples/" class="">
      Javascript Examples
    </a>
  </li>

  <ul class="subnav">
        
        
        
        
        
        
        
      
  </ul>

    
  <!-- 2 deep  -->
  <!-- print subroot  -->
  <li>
    <a href="../" class="active">
      Python Examples
    </a>
  </li>

  <ul class="subnav">
        
    
    <li><a href="./" class="active">Everloop</a></li>
        
    
    <li><a href="../humidity/" class="">Humidity</a></li>
        
    
    <li><a href="../imu/" class="">IMU</a></li>
        
    
    <li><a href="../pressure/" class="">Pressure</a></li>
        
    
    <li><a href="../uv/" class="">UV</a></li>
        
    
    <li><a href="../servo/" class="">Servo</a></li>
        
    
    <li><a href="../gpio/" class="">GPIO</a></li>
      
  </ul>

    
  <!-- only 1 deep, print menu items  -->
   
  <li><a href="../../troubleshooting/" class="">Troubleshooting</a></li>
    
</ul>

 
              <!-- <li><a target="_blank" href="https://www.hackster.io/matrix-labs">Projects</a></li> -->
            </ul>
          </div>
        </div>
        <div id="content" class="col-lg-8 col-md-9 md-typeset">
           <h2 style="padding-top:0">Everloop</h2>

<h4 style="padding-top:0">Python Example</h4>

<h3 id="device-compatibility">Device Compatibility</h3>
<p><img class="creator-compatibility-icon" src="../../img/creator-icon.svg">
<img class="voice-compatibility-icon" src="../../img/voice-icon.svg"></p>
<h2 id="overview">Overview</h2>
<p>The Everloop driver allows for:</p>
<ul>
<li>Reading amount of LEDs your MATRIX device has.</li>
<li>Setting the RGBW colors for each individual LED.</li>
</ul>
<h3 style="padding-top:0">Available ZeroMQ Ports</h3>

<ul>
<li><code>Base port</code>: 20021</li>
<li><code>Keep-alive port</code>: 20022</li>
<li><code>Error port</code>: 20023</li>
<li><code>Data update port</code>: 20024</li>
</ul>
<h2 id="code-example">Code Example</h2>
<p>The following sections show how to implement a connection to each of the Everloop driver's ports. You can download this example <a href="https://github.com/matrix-io/matrix-core-examples/blob/master/python/everloop.py" target="_blank">here</a>.</p>
<!-- Initial Variables -->

<details class="info" open="open"><summary>Initial Variables</summary><p>Before we go into connecting to each port, the variables defined below are needed in order to access the ZeroMQ and MATRIX Protocol Buffer libraries for Python. We also define a few helpful variables for easy references.
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">os</span> <span class="c1"># Miscellaneous operating system interface</span>
<span class="kn">import</span> <span class="nn">zmq</span> <span class="c1"># Asynchronous messaging framework</span>
<span class="kn">import</span> <span class="nn">time</span> <span class="c1"># Time access and conversions</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span> <span class="c1"># Random numbers</span>
<span class="kn">import</span> <span class="nn">sys</span> <span class="c1"># System-specific parameters and functions</span>
<span class="kn">from</span> <span class="nn">matrix_io.proto.malos.v1</span> <span class="kn">import</span> <span class="n">driver_pb2</span> <span class="c1"># MATRIX Protocol Buffer driver library</span>
<span class="kn">from</span> <span class="nn">matrix_io.proto.malos.v1</span> <span class="kn">import</span> <span class="n">io_pb2</span> <span class="c1"># MATRIX Protocol Buffer sensor library</span>
<span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span><span class="p">,</span> <span class="n">Manager</span><span class="p">,</span> <span class="n">Value</span> <span class="c1"># Allow for multiple processes at once</span>
<span class="kn">from</span> <span class="nn">zmq.eventloop</span> <span class="kn">import</span> <span class="n">ioloop</span><span class="p">,</span> <span class="n">zmqstream</span><span class="c1"># Asynchronous events through ZMQ</span>
<span class="n">matrix_ip</span> <span class="o">=</span> <span class="s1">&#39;127.0.0.1&#39;</span> <span class="c1"># Local device ip</span>
<span class="n">everloop_port</span> <span class="o">=</span> <span class="mi">20021</span> <span class="c1"># Driver Base port</span>
<span class="n">led_count</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Amount of LEDs on MATRIX device</span>
<span class="c1"># Handy function for connecting to the Error port </span>
<span class="kn">from</span> <span class="nn">utils</span> <span class="kn">import</span> <span class="n">register_error_callback</span>
</pre></div></p>
</details>
<!-- Base PORT -->

<details class="info" open="open"><summary>Base Port</summary><p>Here is where the configuration for our Everloop example goes. Once we connect to the <strong>Base Port</strong>, we will pass a configuration to the Everloop driver. With this we can set the LED configuration. The <code>while True</code> loop is used to show how you can rapidly push different LED colors.
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">config_socket</span><span class="p">(</span><span class="n">ledCount</span><span class="p">):</span>  
    <span class="c1"># Define zmq socket</span>
    <span class="n">context</span> <span class="o">=</span> <span class="n">zmq</span><span class="o">.</span><span class="n">Context</span><span class="p">()</span>
    <span class="c1"># Create a Pusher socket</span>
    <span class="n">socket</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">PUSH</span><span class="p">)</span>
    <span class="c1"># Connect Pusher to configuration socket</span>
    <span class="n">socket</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tcp://{0}:{1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">matrix_ip</span><span class="p">,</span> <span class="n">everloop_port</span><span class="p">))</span>

    <span class="c1"># Loop forever</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="c1"># Create a new driver config</span>
        <span class="n">driver_config_proto</span> <span class="o">=</span> <span class="n">driver_pb2</span><span class="o">.</span><span class="n">DriverConfig</span><span class="p">()</span>
        <span class="c1"># Create an empty Everloop image</span>
        <span class="n">image</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># For each device LED</span>
        <span class="k">for</span> <span class="n">led</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ledCount</span><span class="p">):</span>
            <span class="c1"># Set individual LED value</span>
            <span class="n">ledValue</span> <span class="o">=</span> <span class="n">io_pb2</span><span class="o">.</span><span class="n">LedValue</span><span class="p">()</span>
            <span class="n">ledValue</span><span class="o">.</span><span class="n">blue</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
            <span class="n">ledValue</span><span class="o">.</span><span class="n">red</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
            <span class="n">ledValue</span><span class="o">.</span><span class="n">green</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
            <span class="n">ledValue</span><span class="o">.</span><span class="n">white</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">image</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ledValue</span><span class="p">)</span>
        <span class="c1"># Store the Everloop image in driver configuration</span>
        <span class="n">driver_config_proto</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">led</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

        <span class="c1"># Send driver configuration through ZMQ socket</span>
        <span class="n">socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">driver_config_proto</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">())</span>
        <span class="c1"># Wait before restarting loop</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
</pre></div></p>
</details>
<!-- Keep-alive PORT -->

<details class="info" open="open"><summary>Keep-alive Port</summary><p>The next step is to connect and send a message to the <strong>Keep-alive Port</strong>. That message will grant us a response from the <strong>Data Update Port</strong> for the current LED count of your MATRIX device. The code below will give only send one ping because LED count will not change.
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">ping_socket</span><span class="p">():</span>
    <span class="c1"># Define zmq socket</span>
    <span class="n">context</span> <span class="o">=</span> <span class="n">zmq</span><span class="o">.</span><span class="n">Context</span><span class="p">()</span>
    <span class="c1"># Create a Pusher socket</span>
    <span class="n">ping_socket</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">PUSH</span><span class="p">)</span>
    <span class="c1"># Connect to the socket</span>
    <span class="n">ping_socket</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tcp://{0}:{1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">matrix_ip</span><span class="p">,</span> <span class="n">everloop_port</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="c1"># Send one ping</span>
    <span class="n">ping_socket</span><span class="o">.</span><span class="n">send_string</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div></p>
</details>
<!-- Error PORT -->

<details class="info" open="open"><summary>Error Port</summary><p>The <strong>Error Port</strong> connection is taken care of by the <code>utils import</code>. Below we define a function to be called and given any error messages that occur within MATRIX CORE.
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">everloop_error_callback</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
    <span class="c1"># Log error</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
</pre></div></p>
</details>
<!-- Data Update PORT -->

<details class="info" open="open"><summary>Data Update Port</summary><p>A connection to the <strong>Data Update Port</strong> will allow us to receive the current LED count on your MATRIX device. Once we connect to the port, the <code>updateLedCount</code> function will pass the LED count to a global variable and then close the connection the <strong>Data-update Port</strong>.</p>
<p><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_socket</span><span class="p">():</span>
    <span class="c1"># Define zmq socket</span>
    <span class="n">context</span> <span class="o">=</span> <span class="n">zmq</span><span class="o">.</span><span class="n">Context</span><span class="p">()</span>
    <span class="c1"># Create a Subscriber socket</span>
    <span class="n">socket</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">SUB</span><span class="p">)</span>
    <span class="c1"># Connect to the Data Update port</span>
    <span class="n">socket</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tcp://{0}:{1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">matrix_ip</span><span class="p">,</span> <span class="n">everloop_port</span><span class="o">+</span><span class="mi">3</span><span class="p">))</span>
    <span class="c1"># Connect Subscriber to Error port</span>
    <span class="n">socket</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">SUBSCRIBE</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="c1"># Create the stream to listen to data from port</span>
    <span class="n">stream</span> <span class="o">=</span> <span class="n">zmqstream</span><span class="o">.</span><span class="n">ZMQStream</span><span class="p">(</span><span class="n">socket</span><span class="p">)</span>

    <span class="c1"># Function to update LED count and close connection to the Data Update Port</span>
    <span class="k">def</span> <span class="nf">updateLedCount</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="c1"># Extract data and pass into led_count global variable</span>
        <span class="k">global</span> <span class="n">led_count</span>
        <span class="n">led_count</span> <span class="o">=</span> <span class="n">io_pb2</span><span class="o">.</span><span class="n">LedValue</span><span class="p">()</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">green</span>
        <span class="c1"># Log LEDs</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{0} LEDs counted&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">led_count</span><span class="p">))</span>
        <span class="c1"># If LED count obtained</span>
        <span class="k">if</span> <span class="n">led_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># Close Data Update Port connection</span>
            <span class="n">ioloop</span><span class="o">.</span><span class="n">IOLoop</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;LED count obtained. Disconnecting from data publisher {0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">everloop_port</span><span class="o">+</span><span class="mi">3</span><span class="p">))</span>
    <span class="c1"># Call updateLedCount() once data is received</span>
    <span class="n">stream</span><span class="o">.</span><span class="n">on_recv</span><span class="p">(</span><span class="n">updateLedCount</span><span class="p">)</span>

    <span class="c1"># Log and begin event loop for ZMQ connection to Data Update Port</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Connected to data publisher with port {0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">everloop_port</span><span class="o">+</span><span class="mi">3</span><span class="p">))</span>
    <span class="n">ioloop</span><span class="o">.</span><span class="n">IOLoop</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
<h4>Data Output</h4>
The Python object below is an example output you'll receive from the <strong>Data Update Port</strong>.</p>
<blockquote>
<p>The output name will be changed in a following update
<div class="codehilite"><pre><span></span><span class="n">green</span><span class="p">:</span> <span class="mi">18</span>
</pre></div></p>
</blockquote>
</details>
<!-- Start Process -->

<details class="info" open="open"><summary>Start Processes</summary><p>This is where we begin the asynchronous events for each of the driver ports and where we define the functions we want to use for each port. This example is only using the <strong>Error Port</strong> connection asynchronously because the <strong>Keep-alive Port</strong> and <strong>Data-update Port</strong> are only used once.</p>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># Initiate asynchronous events</span>
    <span class="n">ioloop</span><span class="o">.</span><span class="n">install</span><span class="p">()</span>
    <span class="c1"># Start Error Port connection</span>
    <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">register_error_callback</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">everloop_error_callback</span><span class="p">,</span> <span class="n">matrix_ip</span><span class="p">,</span> <span class="n">everloop_port</span><span class="p">))</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>    
    <span class="c1"># Ping the Keep-alive Port once</span>
    <span class="n">ping_socket</span><span class="p">()</span>
    <span class="c1"># Start Data Update Port connection &amp; close after response</span>
    <span class="n">update_socket</span><span class="p">()</span>
    <span class="c1"># Send Base Port configuration</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">config_socket</span><span class="p">(</span><span class="n">led_count</span><span class="p">)</span>
    <span class="c1"># Avoid logging Everloop errors on user quiting</span>
    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39; quit&#39;</span><span class="p">)</span>
</pre></div>

</details> 
        </div>
        <div class="toc-parent col-lg-2 col-md-3">
          <div class="toc">
            
            <h3>Contents</h3>
            <ul class="nav flex-column">
               <li class='nav-item'>
  <a href="#device-compatibility" class="nav-link active">
    Device Compatibility
  </a>
  
</li>  <li class='nav-item'>
  <a href="#overview" class="nav-link ">
    Overview
  </a>
  
</li>  <li class='nav-item'>
  <a href="#code-example" class="nav-link ">
    Code Example
  </a>
  
</li> 
            </ul>
          </div>
        </div>
        
      </div>
    </div>
  </div>

  <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8">
        <div class="row">
          <div class="col-sm-4">
            <h5>MATRIX</h5>
            <ul>
              <li>
                <a href="https://matrix.one/products/creator" target="_blank">Creator</a>
              </li>
              <li>
                <a href="https://matrix.one/products/voice" target="_blank">Voice</a>
              </li>
              <li>
                <a href="http://community.matrix.one/" target="_blank">Community</a>
              </li>
            </ul>
          </div>
          <div class="col-sm-4">
            <h5>Learn</h5>
            <ul>
              <li>
                <a href="https://www.matrix.one/educators" target="_blank">Educators</a>
              </li>
              <li>
                <a href="https://www.matrix.one/developers" target="_blank">Developers</a>
              </li>
              <li>
                <a href="https://www.matrix.one/resources" target="_blank">Resources</a>
              </li>
            </ul>
          </div>
          <div class="col-sm-4">
            <h5>Social Network</h5>
            <ul>
              <li>
                <a href="https://www.facebook.com/MATRIXCreator" target="_blank">Facebook</a>
              </li>
              <li>
                <a href="https://twitter.com/matrix_creator" target="_blank">Twitter</a>
              </li>
              <li>
                <a href="https://www.youtube.com/channel/UCBIqR8r0tfY6W-4-YpZ7NeQ" target="_blank">YouTube</a>
              </li>
              <li>
                <a href="https://www.instagram.com/matrix_creator/" target="_blank">Instagram</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <h5>Contact</h5>
        <ul>
          <li>
            <a href="https://matrix.one/contact">Contact Us</a>
          </li>
          <li class="subscribe-box">
            <form id="newsletter-form">
              <div class="input-group">
                <input id="newsletter-email" type="email" class="form-control" placeholder="Subscribe for Updates">
                <button type="submit" class="btn btn-success">Subscribe</button>
              </div>
              <label for="newsletter-email"></label>
            </form>
          </li>
        </ul>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-6">
        <a href="https://creator.matrix.one" class="company-logo">
          <img src="../../../img/everloop.png" width="38" height="38" class="d-inline-block align-top" alt="">
          <span>MATRIX</span>
        </a>
        <small class="copyright">
          2019 &copy; MATRIX - All rights reserved
        </small>
      </div>
      <div class="col-sm-6">
        <div class="utility-links">
          <a href="https://matrix.one/policies/terms">Terms of Service</a>
          <a href="https://matrix.one/policies/privacy">Privacy Policy</a>
          <a href="https://matrix.one/policies/cookie">Cookie Policy</a>
        </div>
      </div>
    </div>
  </div>
</footer>
  <!--Global Vars-->
  <script>
    base_url = "../../..";
  </script>
  <!-- Scripts -->
  <script src="../../../js/clipboard.min.js"></script>
  <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
  <script src="../../../js/theme.js"></script>
  <script src="https://use.fontawesome.com/21aeb6fedc.js"></script>
  <script src="../../../js/jquery.ajaxchimp.min.js"></script>
  <script src="../../../js/jquery.ajaxchimp.langs.min.js"></script>
  <script src="../../../js/footer.js"></script>

  <!-- TOC Script -->
  <script>
    jQuery(function($) {
      $('.toc-parent ul li a').on('click', function() {
        var removedElement = $(this)
          .closest('.toc-parent ul li')
          .find('a.active')
          .removeClass('active');

        if (removedElement.length == 0) {
          $('.toc-parent ul li').find('a.active').removeClass('active');
        }

        $(this).addClass('active');
      });
    });
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-38180903-26', 'auto');
    ga('send', 'pageview');
  </script>
  
</body>

</html>